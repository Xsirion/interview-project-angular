<div class="bg-white rounded-lg shadow-lg overflow-hidden m-5">
  <div class="bg-blue-800 text-white px-6 py-4">
    <h2 class="text-xl font-semibold">Tabela Akcji</h2>
    <div class="text-sm mt-1 flex items-center gap-4">
      <span>Status: {{ stocksStore.connectionStatus() }}</span>
      <span>Akcji: {{ stocksStore.stocksCount() }}</span>
      <span class="text-green-300">Wzrosty: {{ stocksStore.gainCount() }}</span>
      <span class="text-red-300">Spadki: {{ stocksStore.lossCount() }}</span>
      @if (stocksStore.lastUpdateTime()) {
        <span>Ostatnia aktualizacja: {{ stocksStore.lastUpdateTime() | customDate }}</span>
      }
      @if (isConnected) {
        <button (click)="disconnect()">Rozłącz</button>
      } @else {
        <button (click)="connect()">Połącz</button>
      }
      <button (click)="refresh()">Odśwież</button>
    </div>
  </div>

  @if (isLoading) {
    <div class="p-8 text-center text-blue-500">Ładowanie danych akcji...</div>
  } @else if (isError) {
    <div class="p-8 text-center text-red-500">
      <p>Błąd: {{ stocksStore.error() }}</p>
      <button
        (click)="refresh()"
        class="mt-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
      >
        Spróbuj ponownie
      </button>
    </div>
  } @else if (stocksStore.stocksCount() > 0) {
    <div class="overflow-x-auto">
      <table class="w-full">
        <thead class="bg-blue-800 text-white">
          <tr>
            <th class="px-4 py-3 text-left font-medium">Walor</th>
            <th class="px-4 py-3 text-right font-medium">Kurs</th>
            <th class="px-4 py-3 text-right font-medium">Zmiana</th>
            <th class="px-4 py-3 text-right font-medium">Zmiana %</th>
            <th class="px-4 py-3 text-right font-medium">Otwarcie</th>
            <th class="px-4 py-3 text-right font-medium">Max</th>
            <th class="px-4 py-3 text-right font-medium">Min</th>
            <th class="px-4 py-3 text-right font-medium">Czas</th>
          </tr>
        </thead>
        <tbody>
          @for (stock of stocksStore.stocks(); track stock.symbol) {
            <tr
              app-stocks-table-row
              [stock]="stock"
              class="border-b border-gray-200 hover:bg-gray-50 transition-colors"
            ></tr>
          }
        </tbody>
      </table>
    </div>
  } @else {
    <div class="p-8 text-center text-gray-500">Brak danych akcji.</div>
  }
</div>
